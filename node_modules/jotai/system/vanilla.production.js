System.register([],function(b){"use strict";return{execute:function(){b("atom",R);let N=0;function R(s,c){const g=`atom${++N}`,v={toString:()=>g};return typeof s=="function"?v.read=s:(v.init=s,v.read=p=>p(v),v.write=(p,z,h)=>z(v,typeof h=="function"?h(p(v)):h)),c&&(v.write=c),v}const q=s=>"init"in s,B=s=>!!s.write,M=new WeakMap,T=(s,c)=>{M.set(s,c),s.catch(()=>{}).finally(()=>M.delete(s))},F=(s,c)=>{const g=M.get(s);g&&(M.delete(s),g(c))},G=(s,c)=>{s.status="fulfilled",s.value=c},H=(s,c)=>{s.status="rejected",s.reason=c},U=s=>typeof(s==null?void 0:s.then)=="function",y=(s,c)=>"v"in s&&"v"in c&&Object.is(s.v,c.v),I=(s,c)=>"e"in s&&"e"in c&&Object.is(s.e,c.e),E=s=>"v"in s&&s.v instanceof Promise,V=(s,c)=>"v"in s&&"v"in c&&s.v.orig&&s.v.orig===c.v.orig,S=s=>{if("e"in s)throw s.e;return s.v},_=b("createStore",()=>{const s=new WeakMap,c=new WeakMap,g=new Map,v=t=>s.get(t),p=(t,e)=>{const r=s.get(t);if(s.set(t,e),g.has(t)||g.set(t,r),r&&E(r)){const n="v"in e?e.v instanceof Promise?e.v:Promise.resolve(e.v):Promise.reject(e.e);F(r.v,n)}},z=(t,e,r)=>{const n=new Map;let i=!1;r.forEach((o,l)=>{!o&&l===t&&(o=e),o&&(n.set(l,o),e.d.get(l)!==o&&(i=!0))}),(i||e.d.size!==n.size)&&(e.d=n)},h=(t,e,r)=>{const n=v(t),i={d:(n==null?void 0:n.d)||new Map,v:e};if(r&&z(t,i,r),n&&y(n,i)&&n.d===i.d)return n;if(n&&E(n)&&E(i)&&V(n,i)){if(n.d===i.d)return n;i.v=n.v}return p(t,i),i},J=(t,e,r,n)=>{if(U(e)){let i;const o=new Promise((l,f)=>{let a=!1;e.then(d=>{if(!a){a=!0;const u=v(t),w=h(t,o,r);G(o,d),l(d),(u==null?void 0:u.d)!==w.d&&O(t,w,u==null?void 0:u.d)}},d=>{if(!a){a=!0;const u=v(t),w=h(t,o,r);H(o,d),f(d),(u==null?void 0:u.d)!==w.d&&O(t,w,u==null?void 0:u.d)}}),i=d=>{a||(a=!0,d.then(u=>G(o,u),u=>H(o,u)),l(d))}});return o.orig=e,o.status="pending",T(o,l=>{l&&i(l),n==null||n()}),h(t,o,r)}return h(t,e,r)},$=(t,e,r)=>{const n=v(t),i={d:(n==null?void 0:n.d)||new Map,e};return r&&z(t,i,r),n&&I(n,i)&&n.d===i.d?n:(p(t,i),i)},m=t=>{const e=v(t);if(e&&(e.d.forEach((a,d)=>{d!==t&&!c.has(d)&&m(d)}),Array.from(e.d).every(([a,d])=>{const u=v(a);return a===t||u===d||u&&!E(u)&&y(u,d)})))return e;const r=new Map;let n=!0;const i=a=>{if(a===t){const u=v(a);if(u)return r.set(a,u),S(u);if(q(a))return r.set(a,void 0),a.init;throw new Error("no atom init")}const d=m(a);return r.set(a,d),S(d)};let o,l;const f={get signal(){return o||(o=new AbortController),o.signal},get setSelf(){return!l&&B(t)&&(l=(...a)=>{if(!n)return j(t,...a)}),l}};try{const a=t.read(i,f);return J(t,a,r,()=>o==null?void 0:o.abort())}catch(a){return $(t,a,r)}finally{n=!1}},x=t=>S(m(t)),K=t=>{let e=c.get(t);return e||(e=W(t)),e},P=(t,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(t)),Q=t=>{const e=c.get(t);e&&P(t,e)&&D(t)},X=t=>{const e=new Map,r=new WeakMap,n=o=>{const l=c.get(o);l==null||l.t.forEach(f=>{f!==o&&(e.set(f,(e.get(f)||new Set).add(o)),r.set(f,(r.get(f)||0)+1),n(f))})};n(t);const i=o=>{const l=c.get(o);l==null||l.t.forEach(f=>{var a;if(f!==o){let d=r.get(f);if(d&&r.set(f,--d),!d){let u=!!((a=e.get(f))!=null&&a.size);if(u){const w=v(f),Y=m(f);u=!w||!y(w,Y)}u||e.forEach(w=>w.delete(f))}i(f)}})};i(t)},L=(t,...e)=>{let r=!0;const n=l=>S(m(l)),i=(l,...f)=>{let a;if(l===t){if(!q(l))throw new Error("atom not writable");const d=v(l),u=J(l,f[0]);(!d||!y(d,u))&&X(l)}else a=L(l,...f);return r||C(),a},o=t.write(n,i,...e);return r=!1,o},j=(t,...e)=>{const r=L(t,...e);return C(),r},W=(t,e)=>{const r={t:new Set(e&&[e]),l:new Set};if(c.set(t,r),m(t).d.forEach((n,i)=>{const o=c.get(i);o?o.t.add(t):i!==t&&W(i,t)}),m(t),B(t)&&t.onMount){const n=t.onMount((...i)=>j(t,...i));n&&(r.u=n)}return r},D=t=>{var e;const r=(e=c.get(t))==null?void 0:e.u;r&&r(),c.delete(t);const n=v(t);n&&(E(n)&&F(n.v),n.d.forEach((i,o)=>{if(o!==t){const l=c.get(o);l&&(l.t.delete(t),P(o,l)&&D(o))}}))},O=(t,e,r)=>{const n=new Set(e.d.keys());r==null||r.forEach((i,o)=>{if(n.has(o)){n.delete(o);return}const l=c.get(o);l&&(l.t.delete(t),P(o,l)&&D(o))}),n.forEach(i=>{const o=c.get(i);o?o.t.add(t):c.has(t)&&W(i,t)})},C=()=>{for(;g.size;){const t=Array.from(g);g.clear(),t.forEach(([e,r])=>{const n=v(e);if(n){n.d!==(r==null?void 0:r.d)&&O(e,n,r==null?void 0:r.d);const i=c.get(e);i&&!(r&&!E(r)&&(y(r,n)||I(r,n)))&&i.l.forEach(o=>o())}})}};return{get:x,set:j,sub:(t,e)=>{const r=K(t);C();const n=r.l;return n.add(e),()=>{n.delete(e),Q(t)}}}});let k;const Z=b("getDefaultStore",()=>(k||(k=_()),k))}}});

# 1. How to setup and use local repository server
## Setup local repository server
We use `verdaccio` for

```
$ yarn global add forever verdaccio verdaccio-server
$ cd /usr/local/bin && ./forever start ./verdaccio
$ vim /home/{user}/.config/verdaccio/config.yaml
==============
listen:
  0.0.0.0:4873
==============
$ ./forever restartall
```

## Publish a package to local repository server
Add user to local repository server (this step is run for the first time)<br>
`npm adduser --registry http://registry.gogojungle.net`

Publish a package<br>
```cd folder_to_publish && npm publish -f --registry http://registry.gogojungle.net```

## To use build i18n
```
$ yarn add @gogojungle/build.i18n.gogojungle.co.jp
```
Add [config](#options) i18n.config.js (below example for surface/ja)
```
module.exports =  {
  STAGING_FOLDER: '1mngCEldF0HG7DrXK5w7AA390K0Ssso9J',
  BK_FOLDER_ID: '1FOHurU-NgeGtCvmjrDlqWrk09yUIdV_5',
  LAST_ID_SHEET: '1bJ_bSYh4-Po_3mL-IFdkYWWIgsBlaykEljPfHqVegx4',
  TOKEN_PATH: '../googleapi/token.json',
  CREDENTIAL_PATH: '../googleapi/credentials.json',
  I18N_PATH: './lang',
  EXCEL_PATH: './localization',
  LANG_SUPPORT: 'ja,en,th,ch,tw,vi',
  REF_ROW: 2,
  REF_CELL: 10,
  FILE_LIST_BK: [ // this option has been deprecated from 1.0.9
    'common.xlsx',
    'components.xlsx',
    'components-desktop.xlsx',
    'components-mobile.xlsx',
    'desktop.xlsx',
    'mobile.xlsx',
  ]
}
```

Add script in package.json
```
"postinstall": "cd node_modules/@gogojungle/build.i18n.gogojungle.co.jp && yarn",
```

Create build script
```
const googleSheet = require('@gogojungle/build.i18n.gogojungle.co.jp')
googleSheet()
```

## Options
#### FORMAT_TYPE (string)
- How to use
At i18n.config.js, add config value like below
```
module.exports =  {
  ...
  FORMAT_TYPE: 'REACT', // (VUE|REACT)
}
```

- List of values:
  - If the `FORMAT_TYPE` is `VUE`, generate for  `vue-i18n`
  ```
  └── lang
      ├── common
      |   ├── index.json
      |   └── components.json
      └── components
          ├── index.json
          └── components.json
  ```



  - If the `FORMAT_TYPE` is `REACT`, generate for  `next-i18next`.
  ```
  └── lang
      ├── en
      |  ├── common@index.json
      |  └── components@index.json
      └── ja
         ├── common@index.json
         └── components@index.json


  // With the `FORMAT_TYPE = REACT`, the json file name format is `<file-name>@<sheet-name>.json`.
  ```
